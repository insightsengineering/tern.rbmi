[{"path":"https://insightsengineering.github.io/tern.rbmi/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"NEST. Author, maintainer. Roche. Copyright holder, funder. Jana Stoilova. Author. Joe Zhu. Author. Pawel Rucki. Author.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"NEST, Stoilova J, Zhu J, Rucki P (2022). tern.rbmi: Create TLGs using rbmi tern. https://github.com/insightsengineering/tern.rbmi, https://insightsengineering.github.io/tern.rbmi/.","code":"@Manual{,   title = {tern.rbmi: Create TLGs using rbmi and tern},   author = {{NEST} and Jana Stoilova and Joe Zhu and Pawel Rucki},   year = {2022},   note = {https://github.com/insightsengineering/tern.rbmi, https://insightsengineering.github.io/tern.rbmi/}, }"},{"path":[]},{"path":"https://insightsengineering.github.io/tern.rbmi/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Create TLGs using rbmi and tern","text":"nesttemplate provides custom pkgdown template NEST packages. Please don’t use package. order take full advantage template need use pkgdown >= 2.0.0.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/index.html","id":"templates","dir":"","previous_headings":"","what":"Templates","title":"Create TLGs using rbmi and tern","text":"Please ensure _pkgdown.yml file contains:","code":"template:     package: nesttemplate"},{"path":"https://insightsengineering.github.io/tern.rbmi/index.html","id":"example-sites","dir":"","previous_headings":"","what":"Example sites","title":"Create TLGs using rbmi and tern","text":"tern teal teal.modules.general teal.modules.clinical","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/pull_request_template.html","id":null,"dir":"","previous_headings":"","what":"Pull Request","title":"Pull Request","text":"Fixes #nnn","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/a_rbmi_lsmeans.html","id":null,"dir":"Reference","previous_headings":"","what":"Formatted Analysis function which can be further customized by calling\nrtables::make_afun() on it. It is used as afun in rtables::analyze(). — a_rbmi_lsmeans","title":"Formatted Analysis function which can be further customized by calling\nrtables::make_afun() on it. It is used as afun in rtables::analyze(). — a_rbmi_lsmeans","text":"Formatted Analysis function can customized calling rtables::make_afun() . used afun rtables::analyze().","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/a_rbmi_lsmeans.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Formatted Analysis function which can be further customized by calling\nrtables::make_afun() on it. It is used as afun in rtables::analyze(). — a_rbmi_lsmeans","text":"","code":"a_rbmi_lsmeans(df, .in_ref_col, show_relative = c(\"reduction\", \"increase\"))"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/a_rbmi_lsmeans.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Formatted Analysis function which can be further customized by calling\nrtables::make_afun() on it. It is used as afun in rtables::analyze(). — a_rbmi_lsmeans","text":"df input dataframe .in_ref_col boolean variable, reference column specified show_relative \"reduction\" (control - treatment, default) \"increase\" (treatment - control) relative change baseline?","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/h_tidy_pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to produce data frame with results\nof pool for a single visit — h_tidy_pool","title":"Helper function to produce data frame with results\nof pool for a single visit — h_tidy_pool","text":"Helper function produce data frame results pool single visit","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/h_tidy_pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to produce data frame with results\nof pool for a single visit — h_tidy_pool","text":"","code":"h_tidy_pool(x)"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/h_tidy_pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to produce data frame with results\nof pool for a single visit — h_tidy_pool","text":"x (pool) list pooled object rbmi analysis results. list includes analysis results, confidence level, hypothesis testing type.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/s_rbmi_lsmeans.html","id":null,"dir":"Reference","previous_headings":"","what":"Statistics function which is extracting estimates from a tidied LS means\ndata frame. — s_rbmi_lsmeans","title":"Statistics function which is extracting estimates from a tidied LS means\ndata frame. — s_rbmi_lsmeans","text":"Statistics function extracting estimates tidied LS means data frame.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/s_rbmi_lsmeans.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Statistics function which is extracting estimates from a tidied LS means\ndata frame. — s_rbmi_lsmeans","text":"","code":"s_rbmi_lsmeans(df, .in_ref_col, show_relative = c(\"reduction\", \"increase\"))"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/s_rbmi_lsmeans.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Statistics function which is extracting estimates from a tidied LS means\ndata frame. — s_rbmi_lsmeans","text":"df input dataframe .in_ref_col boolean variable, reference column specified show_relative \"reduction\" (control - treatment, default) \"increase\" (treatment - control) relative change baseline?","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/summarize_rbmi.html","id":null,"dir":"Reference","previous_headings":"","what":"Analyze function for tabulating LS means estimates from tidied\nrbmi pool results. — summarize_rbmi","title":"Analyze function for tabulating LS means estimates from tidied\nrbmi pool results. — summarize_rbmi","text":"Analyze function tabulating LS means estimates tidied rbmi pool results.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/summarize_rbmi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Analyze function for tabulating LS means estimates from tidied\nrbmi pool results. — summarize_rbmi","text":"","code":"summarize_rbmi(   lyt,   ...,   table_names = \"rbmi_summary\",   .stats = NULL,   .formats = NULL,   .indent_mods = NULL,   .labels = NULL )"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/summarize_rbmi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Analyze function for tabulating LS means estimates from tidied\nrbmi pool results. — summarize_rbmi","text":"lyt (layout) input layout analyses added . ... additional argument. table_names (character) can customized case vars analyzed multiple times, avoid warnings rtables. .stats (character) statistics select table. .formats (named character list) formats statistics. .indent_mods (named integer) indent modifiers labels. .labels (named character) labels statistics (without indent).","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/summarize_rbmi.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Analyze function for tabulating LS means estimates from tidied\nrbmi pool results. — summarize_rbmi","text":"","code":"library(rtables) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union library(broom) library(rbmi)  data <- antidepressant_data levels(data$THERAPY) <- c(\"PLACEBO\", \"DRUG\") # This is important! The order defines the computation order later missing_var <- \"CHANGE\" vars <- list(   id = \"PATIENT\",   visit = \"VISIT\",   expand_vars = c(\"BASVAL\", \"THERAPY\"),   group = \"THERAPY\" ) covariates <- list(   draws = c(\"BASVAL*VISIT\", \"THERAPY*VISIT\"),   analyse = c(\"BASVAL\") ) draws_vars <- set_vars(   outcome = missing_var,   visit = vars$visit,   group = vars$group,   covariates = covariates$draws ) impute_references <- c(\"DRUG\" = \"PLACEBO\", \"PLACEBO\" = \"PLACEBO\") draws_method <- method_bayes() analyse_fun <- ancova analyse_fun_args <- list(   vars = set_vars(     outcome = missing_var,     visit = vars$visit,     group = vars$group,     covariates = covariates$analyse   ) ) pool_args <- list(   conf.level = formals(pool)$conf.level,   alternative = formals(pool)$alternative,   type = formals(pool)$type ) debug_mode <- FALSE  data <- data %>%   dplyr::select(PATIENT, THERAPY, VISIT, BASVAL, THERAPY, CHANGE) %>%   dplyr::mutate(dplyr::across(.cols = vars$id, ~ as.factor(.x))) %>%   dplyr::arrange(dplyr::across(.cols = c(vars$id, vars$visit))) data_full <- do.call(   expand_locf,   args = list(     data = data,     vars = c(vars$expand_vars, vars$group),     group = vars$id,     order = c(vars$id, vars$visit)   ) %>%     append(lapply(data[c(vars$id, vars$visit)], levels)) )  data_full <- data_full %>%   dplyr::group_by(dplyr::across(vars$id)) %>%   dplyr::mutate(!!vars$group := Filter(Negate(is.na), .data[[vars$group]])[1])  # there are duplicates - use first value data_full <- data_full %>%   dplyr::group_by(dplyr::across(c(vars$id, vars$group, vars$visit))) %>%   dplyr::slice(1) %>%   dplyr::ungroup() # need to have a single ID column data_full <- data_full %>%   tidyr::unite(\"TMP_ID\", dplyr::all_of(vars$id), sep = \"_#_\", remove = FALSE) %>%   dplyr::mutate(TMP_ID = as.factor(TMP_ID)) draws_vars$subjid <- \"TMP_ID\"  data_ice <- data_full %>%   dplyr::arrange(dplyr::across(.cols = c(\"TMP_ID\", vars$visit))) %>%   dplyr::filter(is.na(.data[[missing_var]])) %>%   dplyr::group_by(TMP_ID) %>%   dplyr::slice(1) %>%   dplyr::ungroup() %>%   dplyr::select(all_of(c(\"TMP_ID\", vars$visit))) %>%   dplyr::mutate(strategy = \"MAR\")  draws_obj <- draws(   data = data_full,   data_ice = data_ice,   vars = draws_vars,   method = draws_method ) #>  #> SAMPLING FOR MODEL 'MMRM' NOW (CHAIN 1). #> Chain 1:  #> Chain 1: Gradient evaluation took 0.001017 seconds #> Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 10.17 seconds. #> Chain 1: Adjust your expectations accordingly! #> Chain 1:  #> Chain 1:  #> Chain 1: Iteration:    1 / 1200 [  0%]  (Warmup) #> Chain 1: Iteration:  120 / 1200 [ 10%]  (Warmup) #> Chain 1: Iteration:  201 / 1200 [ 16%]  (Sampling) #> Chain 1: Iteration:  320 / 1200 [ 26%]  (Sampling) #> Chain 1: Iteration:  440 / 1200 [ 36%]  (Sampling) #> Chain 1: Iteration:  560 / 1200 [ 46%]  (Sampling) #> Chain 1: Iteration:  680 / 1200 [ 56%]  (Sampling) #> Chain 1: Iteration:  800 / 1200 [ 66%]  (Sampling) #> Chain 1: Iteration:  920 / 1200 [ 76%]  (Sampling) #> Chain 1: Iteration: 1040 / 1200 [ 86%]  (Sampling) #> Chain 1: Iteration: 1160 / 1200 [ 96%]  (Sampling) #> Chain 1: Iteration: 1200 / 1200 [100%]  (Sampling) #> Chain 1:  #> Chain 1:  Elapsed Time: 1.30801 seconds (Warm-up) #> Chain 1:                4.45582 seconds (Sampling) #> Chain 1:                5.76384 seconds (Total) #> Chain 1:  #> Warning: The largest R-hat is 1.18, indicating chains have not mixed. #> Running the chains for more iterations may help. See #> https://mc-stan.org/misc/warnings.html#r-hat #> Warning: The Effective Sample Size is below 40% for 2 parameters. Please consider increasing burn-in and/or burn-between, or the number of samples impute_obj <- impute( # @TODO: add support of `update_stategy` argument   draws_obj,   references = impute_references )  ref_levels <- levels(impute_obj$data$group[[1]]) names(ref_levels) <- c(\"ref\", \"alt\") analyse_fun_args$vars$subjid <- \"TMP_ID\" analyse_obj <- do.call(   analyse,   args = list(     imputations = impute_obj,     fun = analyse_fun   ) %>%     append(analyse_fun_args) ) pool_obj <- do.call(   pool,   args = list(     results = analyse_obj   ) %>%     append(pool_args) )  h_tidy_pool(pool_obj$pars[1:3]) #>   group       est    se_est lower_cl_est upper_cl_est   est_contr  se_contr #> 1   ref -1.615820 0.4862316    -2.575771   -0.6558685          NA        NA #> 2   alt -1.707626 0.4749573    -2.645319   -0.7699335 -0.09180645 0.6826279 #>   lower_cl_contr upper_cl_contr   p_value relative_reduc #> 1             NA             NA        NA             NA #> 2      -1.439497       1.255884 0.8931772     0.05681725 df <- tidy(pool_obj) df #>   group       est    se_est lower_cl_est upper_cl_est   est_contr  se_contr #> 1   ref -1.615820 0.4862316    -2.575771   -0.6558685          NA        NA #> 2   alt -1.707626 0.4749573    -2.645319   -0.7699335 -0.09180645 0.6826279 #> 3   ref -4.201801 0.6515251    -5.488575   -2.9150272          NA        NA #> 4   alt -2.869824 0.6336333    -4.121133   -1.6185159  1.33197653 0.9173825 #> 5   ref -6.358246 0.7137948    -7.769146   -4.9473458          NA        NA #> 6   alt -4.145472 0.6982117    -5.525641   -2.7653029  2.21277417 1.0150456 #> 7   ref -7.606447 0.8018633    -9.193576   -6.0193192          NA        NA #> 8   alt -4.742738 0.7826948    -6.291871   -3.1936053  2.86370936 1.1491282 #>   lower_cl_contr upper_cl_contr    p_value relative_reduc visit conf_level #> 1             NA             NA         NA             NA     4       0.95 #> 2     -1.4394968       1.255884 0.89317724     0.05681725     4       0.95 #> 3             NA             NA         NA             NA     5       0.95 #> 4     -0.4800052       3.143958 0.14851295    -0.31700134     5       0.95 #> 5             NA             NA         NA             NA     6       0.95 #> 6      0.2054082       4.220140 0.03098527    -0.34801644     6       0.95 #> 7             NA             NA         NA             NA     7       0.95 #> 8      0.5867999       5.140619 0.01416790    -0.37648447     7       0.95  afun <- make_afun(a_rbmi_lsmeans)  basic_table() %>%   split_cols_by(\"group\", ref_group = levels(df$group)[1]) %>%   split_rows_by(\"visit\", split_label = \"Visit\", label_pos = \"topleft\") %>%   summarize_rbmi() %>%   build_table(df) #> Visit                                       ref                alt        #> ————————————————————————————————————————————————————————————————————————— #> 4                                                                         #>   Adjusted Mean (SE)                   -1.616 (0.486)     -1.708 (0.475)  #>     95% CI                            (-2.576, -0.656)   (-2.645, -0.770) #>   Difference in Adjusted Means (SE)                       -0.092 (0.683)  #>     95% CI                                               (-1.439, 1.256)  #>     Relative Reduction (%)                                     5.7%       #>     p-value (RBMI)                                            0.8932      #> 5                                                                         #>   Adjusted Mean (SE)                   -4.202 (0.652)     -2.870 (0.634)  #>     95% CI                            (-5.489, -2.915)   (-4.121, -1.619) #>   Difference in Adjusted Means (SE)                       1.332 (0.917)   #>     95% CI                                               (-0.480, 3.144)  #>     Relative Reduction (%)                                    -31.7%      #>     p-value (RBMI)                                            0.1485      #> 6                                                                         #>   Adjusted Mean (SE)                   -6.358 (0.714)     -4.145 (0.698)  #>     95% CI                            (-7.769, -4.947)   (-5.526, -2.765) #>   Difference in Adjusted Means (SE)                       2.213 (1.015)   #>     95% CI                                                (0.205, 4.220)  #>     Relative Reduction (%)                                    -34.8%      #>     p-value (RBMI)                                            0.0310      #> 7                                                                         #>   Adjusted Mean (SE)                   -7.606 (0.802)     -4.743 (0.783)  #>     95% CI                            (-9.194, -6.019)   (-6.292, -3.194) #>   Difference in Adjusted Means (SE)                       2.864 (1.149)   #>     95% CI                                                (0.587, 5.141)  #>     Relative Reduction (%)                                    -37.6%      #>     p-value (RBMI)                                            0.0142"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tern.rbmi-package.html","id":null,"dir":"Reference","previous_headings":"","what":"tern.rbmi Package — tern.rbmi-package","title":"tern.rbmi Package — tern.rbmi-package","text":"tern.rbmi analysis package create tables, listings graphs analyze clinical trials data.","code":""},{"path":[]},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tern.rbmi-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"tern.rbmi Package — tern.rbmi-package","text":"Maintainer: NEST basel.nestcicd@roche.com Authors: Jana Stoilova jana.stoilova@roche.com Joe Zhu joe.zhu@roche.com Pawel Rucki pawel.rucki@roche.com contributors: Roche [copyright holder, funder]","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tidy.pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper method (for broom::tidy()) to prepare a data frame from an\npool rbmi object containing the LS means and contrasts and multiple visits — tidy.pool","title":"Helper method (for broom::tidy()) to prepare a data frame from an\npool rbmi object containing the LS means and contrasts and multiple visits — tidy.pool","text":"Helper method (broom::tidy()) prepare data frame pool rbmi object containing LS means contrasts multiple visits","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tidy.pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper method (for broom::tidy()) to prepare a data frame from an\npool rbmi object containing the LS means and contrasts and multiple visits — tidy.pool","text":"","code":"# S3 method for pool tidy(x)"},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tidy.pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper method (for broom::tidy()) to prepare a data frame from an\npool rbmi object containing the LS means and contrasts and multiple visits — tidy.pool","text":"x (pool) list pooled object rbmi analysis results. list includes analysis results, confidence level, hypothesis testing type.","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/reference/tidy.pool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper method (for broom::tidy()) to prepare a data frame from an\npool rbmi object containing the LS means and contrasts and multiple visits — tidy.pool","text":"dataframe","code":""},{"path":"https://insightsengineering.github.io/tern.rbmi/news/index.html","id":"ternrbmi-0009006","dir":"Changelog","previous_headings":"","what":"tern.rbmi 0.0.0.9006","title":"tern.rbmi 0.0.0.9006","text":"Initialize package. Add new RBMI analysis function a_rbmi_lsmeans, well corresponding table functions summarize_rbmi.","code":""}]
